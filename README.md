# cs4111

Databases - Project 1 - Part3

Yifei Bi (yb2456) & Yuting Wang (yw3167)

Project Directory Structure
----------------------------

```
.
├── README.md
└── webserver
    ├── server.py
    └── templates
        ├── _formhelpers.html
        ├── artist.html
        ├── artobject.html
        ├── deleteexhibition.html
        ├── index.html
        ├── newcontactus.html
        ├── newexhibition.html
        └── updategallery.html
```


PostgreSQL account
-------------------------------------
yw3167

URL of web application
-------------------------------------
http://34.73.58.5:8111

Parts of Part1 Proposal Implemented
-------------------------------------

- Built searching application that allows user to view information about art piece (eg. date, cost, artists) and can find out sculpture materials or painting type of each piece through Art object page
- User can view artist contact information (address, URL) and their art works through Artist page
- User can contact the gallery (insert information) if they have any inquiries and suggestions through Contact Us page which will be saved into database
- Application allows users to add new exhibition info (start date and end date) and delete existing (outdated) exhibitions
- Users can also update galleries information (name, address)


Two Webpages that require most interesting database operations:
-------------------------------------
#####Webpage: http://http://34.73.58.5:8111/artobject
* Use: By searching art object title, users are able to look at information about this art piece including price that was purchased, and can look at sculpture materials and painting type through drop menu.

* Database Operations:
```SQL  
SELECT ac.title, ac.year, b.cost, a.name 
FROM (artobject_creates as ac join artist as a on ac.artistid = a.artistid) join bought_by as b on b.id_no = ac.id_no 
WHERE ac.title ~ '{}'".format(key)
```

```SQL
SELECT ac.year, ac.title, s.material 
FROM artobject_creates as ac join sculpture as s on ac.id_no = s.id_no;
```

```SQL
SELECT ac.year, ac.title, p.paintingtype 
FROM artobject_creates as ac join painting as p on ac.id_no = p.id_no;
```

* Why Interesting: Users can easily access to related information regarding particular art piece, especially when having a large number of art objects in the database.

#####Webpage: http://34.73.58.5:8111/newcontactus
* Use: Add new contact information to contactus table when user filling in a contactus form
* Database Operations:
```SQL
SELECT max(con_id) FROM contactus
‘INSERT INTO contactus(con_id,lastname,firstname,emailaddress,message) VALUES (%s, %s, %s, %s, %s)', con_id, lastname, firstname, emailaddress, message
```

Where ```%s``` is replaced by con_id, lastname, firstname, emailaddress, message.

* Why Interesting: Users are able to add new contact information to a existing contactus table in the database. Primary key is auto-generated by selecting maximum of existing IDs and add one to it.


An Extra Interesting Page:
--------------------------
#####Webpage: http://34.73.58.5:8111/updategallery
* Use: This page allows users to update existing information of a gallery.
* Database Operations:
```SQL
UPDATE gallery SET name = %s, location = %s WHERE g_id = %s;
```
* Why Interesting: This allows galleries to have updated infomations (name,location).

#####Webpage: http://34.73.58.5:8111/deleteexhibition
* Use: This page allows users to delete outdated exhibitions.
* Database Operations:
```SQL
DELETE from exhibition WHERE e_id = %s;
```
* Why Interesting: Users can delete an exhibition when it is outdated.

